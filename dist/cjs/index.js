"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=n(e),o=function(e,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},o(e,n)};function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}o(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var i,u,a,c=function(){return c=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},c.apply(this,arguments)};function l(e,n,t,o){return new(t||(t=Promise))((function(r,i){function u(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,a)}c((o=o.apply(e,n||[])).next())}))}function s(e,n){var t,o,r,i,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(t=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,o=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(r=u.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){u.label=a[1];break}if(6===a[0]&&u.label<r[1]){u.label=r[1],r=a;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(a);break}r[2]&&u.ops.pop(),u.trys.pop();continue}a=n.call(e,u)}catch(e){a=[6,e],o=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function f(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}"function"==typeof SuppressedError&&SuppressedError,function(e){e.onInit="onInit",e.onEnter="onEnter",e.onLeave="onLeave",e.onClosing="onClosing"}(i||(i={})),function(e){e.onEnter="onEnter",e.onLeave="onLeave"}(u||(u={}));var v=[],d=!1,p=!0;function m(e){setTimeout((function(){window.history.pushState({id:e.id,name:e.id},e.id)}),100),v.push(e)}function y(e){v.remove((function(n){return n.id===e}))}function h(e){var n;p&&(e.state,v.length>0&&(n=v.pop())&&n.back())}function w(e){"Escape"===e.key&&window.history.back()}d||(window.onpopstate=h,document.addEventListener("popstate",h),document.addEventListener("keydown",w,!1),d=!0);var b={},g=[],x={};function E(e,n,t,o,r,i,u){b[e]?console.warn("ViewModule","Duplicate container type"):b[e]={views:[],containerOrder:n,config:t,openView:o,closeView:r,activateView:i,changeContainer:u}}function C(e){b[e]&&delete b[e]}function T(e){var n,t,o,r,i;return l(this,void 0,void 0,(function(){var a,c,l,f,v;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),e.id||(e.id=e.type+"-"+Date.now()),(a=b[e.type])?R(e.type,e.id)||(c=a.views.find((function(n){return n.id===e.id})))&&!(null===(n=a.config)||void 0===n?void 0:n.moveBetweenViews)?[2]:(l=V(),(f=(null==l?void 0:l.type)===e.type)&&(null==l?void 0:l.id)===e.id?[2]:(l&&!f&&(v=b[l.type],null===(t=v.changeContainer)||void 0===t||t.call(v,e,u.onLeave)),(null===(o=a.config)||void 0===o?void 0:o.disableBrowserHistory)||m({id:e.id,back:function(){k(e.id,e.type)}}),D(e.type,e.id,!0),c?[4,null===(r=a.activateView)||void 0===r?void 0:r.call(a,c)]:[3,2])):[2];case 1:return s.sent(),function(e){var n=g.remove((function(n){return n.id===e.id}));n&&g.push(n)}(c),[3,4];case 2:return a.views.push(e),[4,a.openView(e)];case 3:s.sent(),null===(i=e.onOpened)||void 0===i||i.call(e),function(e){g.push(e)}(e),s.label=4;case 4:return D(e.type,e.id,!1),[3,6];case 5:return s.sent(),D(e.type,e.id,!1),[3,6];case 6:return[2]}}))}))}function k(e,n,t,o){var r,i,a,c;return void 0===t&&(t="Current"),l(this,void 0,void 0,(function(){var l,f,v,d,p,m,h,w;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),e&&n?(l=b[n])?R(n,e)||(f=l.views.findIndex((function(n){return n.id===e})))<0||g.length<2?[2]:(v=l.views[f],d=V([v.id]),p=L(l.views.map((function(e){return e.id})),t,f),m=V(p,v.type),h=(null==d?void 0:d.type)===v.type,d&&!h&&(w=b[d.type],null===(r=w.changeContainer)||void 0===r||r.call(w,v,u.onEnter)),(null===(i=l.config)||void 0===i?void 0:i.disableBrowserHistory)||y(e),D(n,e,!0),null===(a=v.onClose)||void 0===a||a.call(v,o),[4,l.closeView(v,m,t)]):[2]:[2];case 1:return s.sent(),null===(c=v.onClosed)||void 0===c||c.call(v,o),A(l.views,t,f),function(e,n){switch(n){case"All":g.removeAll((function(n){return n.type===e.type}));break;case"AllExceptFirst":case"AllExceptLast":break;case"Current":g.remove((function(n){return n.id===e.id}))}}(v,t),D(n,e,!1),[3,3];case 2:return s.sent(),D(n,e,!1),[3,3];case 3:return[2]}}))}))}function A(e,n,t){var o=e.length;switch(n){case"All":return e.splice(0,o);case"AllExceptFirst":return e.splice(1,o-1);case"AllExceptLast":return e.splice(0,o-1);case"Current":return e.splice(t,1)}}function L(e,n,t){var o=e.length;switch(n){case"All":return e.slice(0,o);case"AllExceptFirst":return e.slice(1,o);case"AllExceptLast":return e.slice(0,o-1);case"Current":return e[t]}}function V(e,n){for(var t=g.length-1;t>=0;t--){var o=g[t];if((e||[]).indexOf(o.id)<0&&(void 0===n||o.type===n))return o}}function R(e,n){return(x[e]||[]).findIndex((function(e){return e===n}))>-1}function D(e,n,t){var o=x[e];o||(o=x[e]=[]),t?o.safePush(n):o.remove((function(e){return e===n}))}var I,S=function(n){e.useEffect(n,[])},M=function(){S((function(){var e=function(e){e.preventDefault()};return window.addEventListener("selectstart",e),function(){window.removeEventListener("selectstart",e)}}))},_=function(n){return e.useCallback(n,[])};exports.EventType=void 0,(I=exports.EventType||(exports.EventType={})).None="None",I.Tap="Tap",I.RightClick="RightClick",I.DoubleClick="DoubleClick",I.Hover="Hover",I.Press="Press",I.HorizontalSwipe="HorizontalSwipe",I.VerticalSwipe="VerticalSwipe";var O=function(n,t,o){var r=e.useRef(),i=e.useRef(),u=e.useRef([]),a=e.useRef(!1),l=e.useRef(),s=e.useRef();M();var f=function(){return Date.now()},v=function(e){if(e.touches){var n=i.current,t=e.touches[e.touches.length-1],o=e.clientX||t.clientX,r=e.clientY||t.clientY;return{x:o,y:r,moveX:o-((null==n?void 0:n.x)||0),moveY:r-((null==n?void 0:n.y)||0),e:e}}},d=function(e){var n,t=u.current;f()-t[t.length-1]>300||a.current?m():t.length<2||(m(),2===t.length&&t[1]-t[0]<300&&(null===(n=null==o?void 0:o.onDoubleClick)||void 0===n||n.call(o,e)))},p=function(e){var n;e.preventDefault(),null===(n=o.onRightClick)||void 0===n||n.call(o,e)},m=function(){u.current=[]},y=_((function(e){var n=u.current;n.length>2&&(u.current.length=0),n.push(f()),i.current=s.current=v(e),T(!0),b(e)})),h=_((function(e){var n;g(e),T(!1),w(),l.current&&(null===(n=o.onTouchEnd)||void 0===n||n.call(o,s.current),l.current=void 0)})),w=function(){var e=r.current;e&&(clearTimeout(e),r.current=void 0)},b=function(e){if(t===exports.EventType.Press)!function(e){w(),m(),r.current=setTimeout((function(){var n;a.current||null===(n=o.onPress)||void 0===n||n.call(o,e)}),500)}(e)},g=function(e){switch(t){case exports.EventType.DoubleClick:d(e);break;case exports.EventType.Tap:!function(e){var n,t=u.current;1!==t.length||a.current?m():(m(),f()-t[0]>300||(u.current=[],null===(n=null==o?void 0:o.onTap)||void 0===n||n.call(o,e)))}(e);break;default:m()}},x=_((function(e){switch(a.current=!0,t){case exports.EventType.HorizontalSwipe:case exports.EventType.VerticalSwipe:!function(e){var n,u=v(e);if(s.current=u,r.current)l.current&&(null===(n=o.onTouchMove)||void 0===n||n.call(o,u));else{m();var f=t===exports.EventType.VerticalSwipe;r.current=setTimeout((function(){var e,n,t,r;if(a.current){var s=i.current;if(u&&s){var v=Math.abs(u.moveX),d=Math.abs(u.moveY);v<d&&f?(l.current=!0,null===(e=o.onTouchStart)||void 0===e||e.call(o,c(c({},u),{x:s.x,y:s.y})),null===(n=o.onTouchMove)||void 0===n||n.call(o,u)):v>=d&&!f&&(l.current=!0,null===(t=o.onTouchStart)||void 0===t||t.call(o,c(c({},u),{x:s.x,y:s.y})),null===(r=o.onTouchMove)||void 0===r||r.call(o,u))}}}),10)}}(e)}})),E=_((function(e){var n;null===(n=null==o?void 0:o.onMouseover)||void 0===n||n.call(o,e)})),C=_((function(e){var n;null===(n=null==o?void 0:o.onMouseout)||void 0===n||n.call(o,e)})),T=function(e){e&&!a.current?(A("mousemove",x),A("touchmove",x)):e||(a.current=!1,k("mousemove",x),k("touchmove",x))},k=function(e,t,o){n.current&&(o?n.current:window).removeEventListener(e,t)},A=function(e,t,o){n.current&&(o?n.current:window).addEventListener(e,t)},L=function(){if(n.current&&t!==exports.EventType.None){if(t===exports.EventType.Hover)return A("mouseover",E,!0),A("mouseout",C,!0),function(){k("mouseover",E,!0),k("mouseout",C,!0)};if(t===exports.EventType.RightClick)return A("contextmenu",p,!0),function(){k("contextmenu",d,!0)};A("mousedown",y,!0),A("mouseup",h),A("touchstart",y,!0),A("touchend",h)}};return S((function(){return L(),function(){T(!1),k("mousedown",y,!0),k("mouseup",h),k("touchstart",y,!0),k("touchend",h),w()}})),{updateRef:function(){L()}}},P=function(e){var n={current:null};O(n,e.event,{onPress:function(e){return t(e)},onTap:function(e){return t(e)},onDoubleClick:function(e){return t(e)},onRightClick:function(e){return t(e)},onMouseover:function(e){t(e)}});var t=function(t){var o;T({type:"Overlay",component:e.component,data:e.mapDataTo?e.mapDataTo(e.data):e.data,onClose:function(n){var t;null===(t=e.onClose)||void 0===t||t.call(e,n)},options:{disableBackdrop:(e.backdrop,!0),params:{event:t,target:(null===(o=e.getTargetElement)||void 0===o?void 0:o.call(e))||n.current||t.target,position:e.position?e.position:"BottomRight"}}})};return n};var N=e.createContext({});e.memo((function(n){var o=n.children,r=n.viewInfo,u=e.useRef({}),a=function(e,n){if(n){var t=u.current[e];t||(t=u.current[e]=[]),t.push(n)}},c=function(e,n){n&&u.current[e].remove((function(e){return e===n}))},l=function(e,n){var t=u.current[e];null==t||t.forEach((function(e){e(n)}))};return S((function(){r.events={onEnter:function(e){l(i.onEnter,e)},onLeave:function(e){l(i.onLeave,e)},onClosing:function(e){l(i.onClosing,e)}}})),t.default.createElement(N.Provider,{value:{listenEvents:function(e){return a(i.onEnter,e.onEnter),a(i.onLeave,e.onLeave),a(i.onClosing,e.onClosing),function(){c(i.onEnter,e.onEnter),c(i.onLeave,e.onLeave),c(i.onClosing,e.onClosing)}},emitEvent:l,close:function(e,n){var t=r.view;k(t.id,t.type,e,n)},getViewData:function(){return r.view.data},openView:function(e){e.type=r.view.type,T(e)}}},o)}),(function(){return!0}));var B,F,z,H=function(n){var t=e.useContext(N);S((function(){if(n){var e=t.listenEvents(n);return function(){e()}}}));var o=function(e,n){var o;null===(o=t.close)||void 0===o||o.call(t,e,n)};return{close:function(e){o("Current",e)},closeByType:o,openView:function(e){var n;null===(n=t.openView)||void 0===n||n.call(t,e)},viewData:t.getViewData()}};function j(){var e=H({}).viewData;return t.default.createElement("div",null,t.default.createElement("span",null,e.message))}function X(){var e=H({}),n=e.close,o=e.viewData;return t.default.createElement(t.default.Fragment,null,t.default.createElement("div",{className:"confirm-card"},null==o?void 0:o.message),t.default.createElement("div",{className:"d-flex mt-3"},t.default.createElement("div",{style:{paddingRight:".5rem",width:"50%"}},t.default.createElement("button",{className:"btn btn-warning w-100",onClick:function(){return n({res:!1})}},"خیر")),t.default.createElement("div",{style:{paddingLeft:".5rem",width:"50%"}},t.default.createElement("button",{className:"btn btn-primary w-100",onClick:function(){return n({res:!0})}},"بله"))))}function q(){var n=this,o=e.useState(),r=o[0],i=o[1],u=e.useRef(!1),a=H({}),c=a.viewData,f=a.close;return S((function(){return l(n,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.callback()];case 1:return(e=n.sent()).type===z.Close?f():i(e),[3,3];case 2:return n.sent(),f(),[3,3];case 3:return[2]}}))})),c.onClickedBackdrop=function(){u.current&&f()},function(){}})),e.useEffect((function(){u.current=!!r}),[r]),t.default.createElement("div",null,r?t.default.createElement(t.default.Fragment,null,t.default.createElement("span",null,r.message),r.type===z.Confirm&&t.default.createElement("button",{className:"btn btn-primary w-100",onClick:function(){return f({res:!0})}},r.confirmButtonCaption)):t.default.createElement(t.default.Fragment,null,t.default.createElement("span",null,c.message),t.default.createElement("span",null,"loading...")))}function U(){var e=H(),n=e.close,o=e.viewData;return t.default.createElement("div",{style:{backgroundColor:"yellow",marginTop:"20px",borderRadius:"8px",padding:"5px"}},t.default.createElement("ul",null,o.options.map((function(e){return t.default.createElement("li",{onClick:function(){return n({res:e})},key:e.value},e.label)}))))}function Y(){var n=e.useRef(),o=H({}),r=o.close,i=o.viewData;return S((function(){return i.delay&&(n.current=setTimeout((function(){r()}),1e3*i.delay)),function(){n.current&&clearTimeout(n.current)}})),t.default.createElement("div",{className:"w-100"},t.default.createElement("div",{className:"row"},t.default.createElement("h1",{className:"col-8"},i.message),t.default.createElement("button",{className:"col-3 btn btn-success",onClick:function(){return r({res:!0})}},"delete")))}!function(e){e.MasterTab="MasterTab",e.Tab="Tab",e.Modal="Modal",e.BottomSheet="BottomSheet",e.Toast="Toast"}(B||(B={})),function(e){e.Success="Success",e.Error="Error"}(F||(F={})),function(e){e.Close="Close",e.Confirm="Confirm"}(z||(z={}));var Q=window,W=Q.$requestAnimationFrame=Q.requestAnimationFrame||Q.webkitRequestAnimationFrame||Q.mozRequestAnimationFrame||function(e){Q.setTimeout(e,1e3/60)};function G(e,n,t,o){var r=Date.now();if(e<0)throw new Error("ANIMATION_SPEED_INVALID");e=e||300;var i=!1,u=function(){if(i)null==o||o();else{var a=Math.min(1,(Date.now()-r)/e);n(Math.floor(1e3*a)/1e3),a<1?W(u):t()}};return u(),function(){i=!0}}var $=function(){var n=e.useRef([]),t=_((function(e){n.current.remove((function(n){return n===e}))})),o=_((function(e,o,r,i){var u=G(e,(function(e){o(e)}),(function(){t(u),r()}),(function(){t(u),null==i||i()}));return n.current.push(u),u})),r=_((function(e){t(e),e()}));return S((function(){return function(){n.current.forEach((function(e){e()})),n.current=[]}})),{requestAnimate:o,cancelAnimate:r}},J=4,K=1e-7,Z=10,ee=.1,ne="function"==typeof Float32Array;function te(e,n){return 1-3*n+3*e}function oe(e,n){return 3*n-6*e}function re(e){return 3*e}function ie(e,n,t){return((te(n,t)*e+oe(n,t))*e+re(n))*e}function ue(e,n,t){return 3*te(n,t)*e*e+2*oe(n,t)*e+re(n)}function ae(e){return e}function ce(e,n,t,o){if(!(0<=e&&e<=1&&0<=t&&t<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&t===o)return ae;for(var r=ne?new Float32Array(11):new Array(11),i=0;i<11;++i)r[i]=ie(i*ee,e,t);function u(n){for(var o=0,i=1;10!==i&&r[i]<=n;++i)o+=ee;--i;var u=o+(n-r[i])/(r[i+1]-r[i])*ee,a=ue(u,e,t);return a>=.001?function(e,n,t,o){for(var r=0;r<J;++r){var i=ue(n,t,o);if(0===i)return n;n-=(ie(n,t,o)-e)/i}return n}(n,u,e,t):0===a?u:function(e,n,t,o,r){var i,u,a=0;do{(i=ie(u=n+(t-n)/2,o,r)-e)>0?t=u:n=u}while(Math.abs(i)>K&&++a<Z);return u}(n,o,o+ee,e,t)}return function(e){return 0===e||1===e?e:ie(u(e),n,o)}}var le=ce(.25,1,.5,1),se={duration:400,start:function(e,n){var t=e.ref.style,o=null==n?void 0:n.ref.style;t.display="1",o&&(o.display="block",o.opacity="1")},animate:function(e,n,t){var o=n.ref.style,r=null==t?void 0:t.ref.style,i=le(e);o.transform="translateX(".concat(100*i,"%)"),r&&(r.filter="brightness(".concat(20*e+80,"%)"),r.transform="translateX(".concat(.2*(i-1)*100,"%)"))},end:function(e,n){var t=e.ref.style,o=null==n?void 0:n.ref.style;t.opacity="0",t.display="none",o&&(o.opacity="1")}},fe={duration:400,start:function(e,n){var t,o=e.ref.style,r=null===(t=null==n?void 0:n.ref)||void 0===t?void 0:t.style;o.display="block",o.zIndex="2",o.transform="translateX(100%)",r&&(r.zIndex="1")},animate:function(e,n,t){var o,r=le(e),i=n.ref.style,u=null===(o=null==t?void 0:t.ref)||void 0===o?void 0:o.style;i.transform="translateX(".concat(100*(1-r),"%)"),u&&(u.transform="translateX(".concat(100*-r*.2,"%)"),u.filter="brightness(".concat(20*(1-e)+80,"%)"))},end:function(e,n){var t,o=null===(t=null==n?void 0:n.ref)||void 0===t?void 0:t.style;o&&(o.display="none")}},ve={duration:300,start:function(e,n){e.ref.style.zIndex="0"},animate:function(e,n,t){var o=le(e),r=n.ref.style;r.opacity=1-e+"";var i=n.ref.offsetHeight;r.marginTop="".concat(-i*o,"px")},end:function(e,n){}},de=e.createContext({}),pe=e.memo((function(n){var o=n.children,r=n.viewInfo,u=e.useRef({}),a=function(e,n){if(n){var t=u.current[e];t||(t=u.current[e]=[]),t.push(n)}},c=function(e,n){n&&u.current[e].remove((function(e){return e===n}))},l=function(e,n){var t=u.current[e];null==t||t.forEach((function(e){e(n)}))};return e.useEffect((function(){r.events={onEnter:function(e){l(i.onEnter,e)},onLeave:function(e){l(i.onLeave,e)},onClosing:function(e){l(i.onClosing,e)}}}),[]),t.default.createElement(de.Provider,{value:{listenEvents:function(e){return a(i.onEnter,e.onEnter),a(i.onLeave,e.onLeave),a(i.onClosing,e.onClosing),function(){c(i.onEnter,e.onEnter),c(i.onLeave,e.onLeave),c(i.onClosing,e.onClosing)}},emitEvent:l,close:function(e,n){var t=r.view;k(t.id,t.type,e,n)},getViewData:function(){return r.view.data},openView:function(e){e.type=r.view.type,T(e)}}},o)}),(function(){return!0})),me=function(){function e(){var e=this;this.observables={},this.defaultId="subscribers",this.getForceId=function(n){var t;return(null===(t=e.getId)||void 0===t?void 0:t.call(e,n||{}))||e.defaultId}}return e.prototype.on=function(e,n){var t=this.getForceId(n),o=this.observables[t];o||(o=this.observables[t]=[]),o.push(e)},e.prototype.off=function(e,n){var t=this.getForceId(n),o=this.observables[t];null==o||o.remove((function(n){return n===e})),0===o.length&&delete this.observables[t]},e.prototype.emit=function(e,n){var t=this.getForceId(n),o=this.observables[t];null==o||o.forEach((function(t){null==t||t.apply(t,[e,n])}))},e}(),ye=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.update=function(e){this.emit("Update",e)},n.prototype.delete=function(e){var n;this.emit("Delete",e);var t=null===(n=this.getId)||void 0===n?void 0:n.call(this,e);t&&delete this.observables[t]},n}(me),he=new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.getId=function(e){return e.id},n}(me)),we=[{id:"1",name:"ali"},{id:"2",name:"reza"}];var be=function(e){return function(e){return Promise.resolve({})}},ge=be(),xe=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.getId=function(e){return e.id},n}(ye),Ee=[{id:"1",text:"hello"},{id:"2",text:"world"}];var Ce=new xe;function Te(e,n){return l(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,o){T({type:B.Modal,id:"confirm-"+Date.now(),component:e,data:n,onClose:function(e){e?t(e):o(!1)}})}))]}))}))}function ke(e,n){return!!e&&(e===n||n.contains(e))}Event.prototype.contains=function(e){return ke(this.target,e)},Array.prototype.last=function(){var e=this||[];return e[e.length-1]},Array.prototype.safePush=function(e){var n=this||[];n.find((function(n){return n===e}))||n.push(e)},Array.prototype.remove=function(e){var n=this||[],t=n.findIndex((function(n){return e(n)}));if(t>=0){var o=n[t];return n.splice(t,1),o}},Array.prototype.removeAll=function(e){for(var n=!0,t=this||[];n;)if(!t.remove(e)){n=!1;break}return[]},exports.Alert=j,exports.Confirm=X,exports.ContextMenuWrapper=function(n){var o=n.children,r=n.contextMenuConfig,i=n.data,u=n.onSelect,a=e.useRef(null);S((function(){var e;c.current=null===(e=a.current)||void 0===e?void 0:e.children[0]}));var c=P({component:r.component,backdrop:r.backdrop,className:r.className,onClose:function(e){null==u||u(e),r.onClose(e)},position:r.position,positionType:r.positionType,event:r.event,data:i,mapDataTo:r.mapDataTo});return t.default.createElement("span",{ref:a},o)},exports.LoadingDialog=q,exports.ObjectObservable=ye,exports.Observable=me,exports.Overlay=function(){var e=H({}),n=e.close,o=e.viewData;return t.default.createElement("ul",{className:"d-block bg-primary p-2 text-lite"},o.options.map((function(e){return t.default.createElement("li",{key:e.text,onClick:function(){n({res:e.value})}},e.text)})))},exports.Scrollable=function(n){var o=n.children,r=n.viewInfo,i=e.useRef(),u=O(i,exports.EventType.VerticalSwipe,{onTouchMove:function(){console.log("Move horizontal")},onTouchStart:function(){console.log("Start move horizontal")},onTouchEnd:function(){console.log("End move horizontal")}}).updateRef;return S((function(){i.current=r.elRef,u()})),t.default.createElement(t.default.Fragment,null,o)},exports.Toast=Y,exports.ViewComponent=function(n){var o=n.viewInfo,r=e.useRef(null),i=o.view.className;return S((function(){var e;o.elRef=r.current,null===(e=o.onInit)||void 0===e||e.call(o,r.current)})),t.default.createElement("div",{ref:r,className:"view-wrapper"+(i?" ".concat(i):"")},o.view.component())},exports.ViewContext=de,exports.ViewContextProvider=pe,exports.activateTabConfig={duration:200,start:function(e,n){var t=e.ref.style;t.display="block",t.opacity="0"},animate:function(e,n,t){var o=n.ref.style,r=null==t?void 0:t.ref.style;o.opacity="".concat(e),r&&(r.opacity="".concat(1-e))},end:function(e,n){var t=null==n?void 0:n.ref.style;t&&(t.display="none")}},exports.activePartialTabAnimationConfig={duration:300,start:function(e,n){var t=e.ref.style;t.display="block",t.opacity="0"},animate:function(e,n,t){var o=n.ref.style,r=null==t?void 0:t.ref.style;o.opacity="".concat(e),r&&(r.opacity="".concat(1-e/2))}},exports.addEventListenerEl=function(e,n,t){null==e||e.addEventListener(n,t)},exports.apiPost=be,exports.bezier=ce,exports.chatObservable=he,exports.chatUpdate=function(){var e=we[1];e.name="Hasan",he.emit("Update",e)},exports.closeTabAnimationConfig=se,exports.closeView=k,exports.containsTargetEl=ke,exports.disableBrowserAction=function(){p=!1,setTimeout((function(){p=!0}),1e3)},exports.getChats=function(){return we},exports.getChatsApi=ge,exports.getMessages=function(){return Ee},exports.getQueryParam=function(e){return a||(a=function(){var e=window.location.href,n=e.indexOf("?"),t="";n>0&&(t=e.substring(n+1));return t.split("&").reduce((function(e,n){var t=n.split("=");return e[t[0]]=t[1],e}),{})}()),a[e]},exports.getViewsByCloseType=L,exports.leaveContainerMasterTabAnimationConfig={duration:300,start:function(e,n){var t=e.ref.style;t.display="block",t.opacity="0"},animate:function(e,n,t){var o=n.ref.style,r=null==t?void 0:t.ref.style;o.opacity="".concat(e),r&&(r.opacity="".concat(1-e/2))}},exports.listenBack=m,exports.messageUpdate=function(){var e=Ee[1];e.text="by",Ce.update(e)},exports.msgObservable=Ce,exports.onCloseToastConfig=ve,exports.onEnterContainerConfig={duration:300,animate:function(e,n){n.ref.style.opacity="".concat(.5+.5*e)}},exports.onEnterTabContainerConfig={duration:400,start:function(e,n){},animate:function(e,n,t){},end:function(e,n){}},exports.onLeaveContainerConfig={duration:500,start:function(e,n){},animate:function(e,n,t){},end:function(e,n){}},exports.onOpenToastConfig={duration:300,start:function(e,n){var t=e.ref.style;t.position="relative",t.zIndex="1",t.opacity="0"},animate:function(e,n,t){n.ref.style.opacity=e+""}},exports.openAlert=function(e){return l(this,void 0,void 0,(function(){return s(this,(function(n){return[2,new Promise((function(n){T({type:B.Tab,id:"alert-"+Date.now(),component:j,data:e,onClose:function(){n(!0)}})}))]}))}))},exports.openConfirm=function(e){return l(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Te(X,e)];case 1:if(!n.sent())throw Error("CANCEL");return[2,!0];case 2:throw n.sent();case 3:return[2]}}))}))},exports.openCustomConfirm=Te,exports.openLoading=function(e,n){var t=e;T({type:n||B.Modal,id:"loading-"+Date.now(),data:t,component:q,className:"loading-message",options:{disableBackdrop:!0,onClickedBackdrop:function(){var e;null===(e=t.onClickedBackdrop)||void 0===e||e.call(t)}}})},exports.openPartialTabAnimationConfig={duration:300,start:function(e,n){var t=e.ref.style;t.display="block",t.opacity="0"},animate:function(e,n,t){var o=n.ref.style,r=null==t?void 0:t.ref.style;o.opacity="".concat(e),r&&(r.opacity="".concat(1-e/2))}},exports.openTabAnimationConfig={duration:300,start:function(e,n){var t=e.ref.style;t.display="block",t.opacity="0"},animate:function(e,n,t){var o=n.ref.style,r=null==t?void 0:t.ref.style;r&&(r.opacity="".concat(1-e)),o.opacity="".concat(e)},end:function(e,n){var t=null==n?void 0:n.ref.style;t&&(t.display="none")}},exports.openTabContainerConfig=fe,exports.openToast=function(e){T({type:B.Toast,id:"toast-"+Date.now(),data:e,component:Y,className:"toast-message"})},exports.openView=T,exports.registerContainer=E,exports.removeContainer=C,exports.removeEventListenerEl=function(e,n,t){null==e||e.removeEventListener(n,t)},exports.replaceUrlWithoutQueryParam=function(e){var n=function(e,n){var t=n.split("?")[0],o=[],r=-1!==n.indexOf("?")?n.split("?")[1]:"";if(""!==r){for(var i=(o=r.split("&")).length-1;i>=0;i-=1)o[i].split("=")[0]===e&&o.splice(i,1);o.length&&(t="/?"+o.join("&"))}return t}(e,window.location.href);window.history.replaceState({},document.title,n)},exports.requestAnimation=G,exports.unlistenBack=y,exports.updateViewsByCloseType=A,exports.useAnimate=$,exports.useClickAsync=function(n,t,o){var r=e.useRef(!1),i={current:void 0};return S((function(){var e=i.current;e&&e.addEventListener("click",(function(i){return l(void 0,void 0,void 0,(function(){var i,u;return s(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),r.current?[2]:(e.classList.add("loading"),r.current=!0,[4,n()]);case 1:return i=a.sent(),r.current=!1,e.classList.remove("loading"),null==t||t(i),[3,3];case 2:return u=a.sent(),e.classList.remove("loading"),r.current=!1,null==o||o(u),[3,3];case 3:return[2]}}))}))}))})),i},exports.useContextEvents=function(n){var t=e.useRef({}),o=n;o.__listeners||(o.__listeners={},o.__events={});var r=function(e){var n=o.__listeners;o.__events[e]=function(t){(n[e]||[]).forEach((function(e){null==e||e(t)}))}};return S((function(){return function(){var e=o.__listeners,n=t.current,r=function(t){n[t].forEach((function(n){var o=e[t].findIndex((function(e){return e===n}));e[t].splice(o,1)}))};for(var i in n)r(i)}})),{listen:function(e){if(e){var n=o.__listeners;for(var i in e){n[i]||(r(i),n[i]=[]),n[i].push(e[i]);var u=t.current[i];u||(u=t.current[i]=[]),u.push(e[i])}}},call:o.__events}},exports.useDisableSelection=M,exports.useEvent=O,exports.useObserver=function(n,t,o,r){var i=e.useState(t),u=i[0],a=i[1],l=_((function(e,n){switch(e){case"Update":a(n===t?c({},n):n),null==r||r(n);break;case"Delete":null==o||o(n)}}));return S((function(){return n.on(l,t),function(){n.off(l,t)}})),u},exports.useOverlay=P,exports.useOverlayMenu=function(e){return P({event:e.event,component:U,data:e.data,backdrop:e.backdrop,position:e.position,onClose:e.onClose,getTargetElement:e.getTargetElement,mapDataTo:e.mapDataTo})},exports.useView=H,exports.useViewManage=function(n,t,o,r,i,a,c,v){var d=e.useState([]),p=d[0],m=d[1],y=e.useRef(""),h=e.useRef(!1),w=$().requestAnimate,b=_((function(e,n,t,o){return new Promise((function(r,i){var u,a,c;if(t||r(!0),null===(u=null==t?void 0:t.start)||void 0===u||u.call(t,e,n,o),(null==o?void 0:o.disableAnimate)||!(null==t?void 0:t.duration))return null===(a=null==t?void 0:t.animate)||void 0===a||a.call(t,1,e,n,o),null===(c=null==t?void 0:t.end)||void 0===c||c.call(t,e,n,o),void r(!0);document.body.classList.add("animating"),w(t.duration,(function(r){var i;null===(i=null==t?void 0:t.animate)||void 0===i||i.call(t,r,e,n,o)}),(function(){var i;null===(i=null==t?void 0:t.end)||void 0===i||i.call(t,e,n,o),document.body.classList.remove("animating"),r(!0)}))}))})),g=_((function(e){return new Promise((function(n,t){var i={id:e.id,view:e,onInit:function(t){return l(void 0,void 0,void 0,(function(){var u,a,c,l,f,v,d;return s(this,(function(s){switch(s.label){case 0:return u=p.find((function(e){return e.id===y.current})),y.current=e.id,a=e.options,(c=null==a?void 0:a.disableAnimate)||h.current||(h.current=!0,c=(null==o?void 0:o.disableFirstTimeAnimate)||!1),(null==a?void 0:a.inBackground)?(t.style.display="none",n(!0),[2]):[4,b({view:e,ref:i.elRef},u?{view:null==u?void 0:u.view,ref:null==u?void 0:u.elRef}:void 0,r,{disableAnimate:c})];case 1:return s.sent(),u&&(null===(f=null===(l=u.events)||void 0===l?void 0:l.onLeave)||void 0===f||f.call(l,{toView:e})),null===(d=null===(v=i.events)||void 0===v?void 0:v.onEnter)||void 0===d||d.call(v,{fromView:null==u?void 0:u.view,data:e.data}),n(!0),[2]}}))}))}};p.push(i),m(f([],p,!0))}))})),x=_((function(e,n,t){return l(void 0,void 0,void 0,(function(){var r,u,a,c,l,v,d,h;return s(this,(function(s){switch(s.label){case 0:return y.current="",n&&(y.current=n.id,r=p.find((function(e){return e.id===n.id}))),(u=p.findIndex((function(n){return n.id===e.id})))<0?[2]:(a=p[u],c=!(null==o?void 0:o.moveBetweenViews)&&u<p.length-1,null===(v=null===(l=a.events)||void 0===l?void 0:l.onClosing)||void 0===v||v.call(l,{toView:n}),[4,b({view:p[u].view,ref:p[u].elRef},r?{view:r.view,ref:r.elRef}:void 0,i,{disableAnimate:c,closeType:t})]);case 1:return s.sent(),r&&(null===(h=null===(d=r.events)||void 0===d?void 0:d.onEnter)||void 0===h||h.call(d,{fromView:a.view})),u>-1&&(A(p,t,u),m(f([],p,!0))),[2]}}))}))})),T=_((function(e){return l(void 0,void 0,void 0,(function(){var n,t,o,r,i,u;return s(this,(function(c){switch(c.label){case 0:return(n=p.find((function(n){return n.id===e.id})))?y.current===e.id?[2]:(t=p.find((function(e){return e.id===y.current})),y.current=e.id,[4,b({view:n.view,ref:n.elRef},t?{view:t.view,ref:t.elRef}:void 0,a)]):[2];case 1:return c.sent(),t&&(null===(r=null===(o=t.events)||void 0===o?void 0:o.onLeave)||void 0===r||r.call(o,{toView:e})),null===(u=null===(i=n.events)||void 0===i?void 0:i.onEnter)||void 0===u||u.call(i,{fromView:null==t?void 0:t.view}),[2]}}))}))})),k=_((function(e,n){return l(void 0,void 0,void 0,(function(){var t,o,r,i,a;return s(this,(function(l){switch(l.label){case 0:return(t=p.find((function(e){return e.id===y.current})))?[4,b({view:t.view,ref:t.elRef},{view:e,ref:null},n===u.onEnter?c:v)]:[2];case 1:return l.sent(),n===u.onEnter?null===(r=null===(o=t.events)||void 0===o?void 0:o.onEnter)||void 0===r||r.call(o,{fromView:e}):n===u.onLeave&&(null===(a=null===(i=t.events)||void 0===i?void 0:i.onLeave)||void 0===a||a.call(i,{toView:e})),[2]}}))}))}));return S((function(){return E(n,t,o||{},g,x,T,k),function(){C(n)}})),{activeViewId:y.current,viewsInfo:p,openView:g,closeView:x}};
