"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("react/jsx-runtime"),e=require("react"),t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},t(n,e)};function r(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o,i,u,a=function(){return a=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},a.apply(this,arguments)};function c(n,e,t,r){return new(t||(t=Promise))((function(o,i){function u(n){try{c(r.next(n))}catch(n){i(n)}}function a(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(u,a)}c((r=r.apply(n,e||[])).next())}))}function l(n,e){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(n,u)}catch(n){a=[6,n],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function s(n,e,t){if(t||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,function(n){n.onInit="onInit",n.onEnter="onEnter",n.onLeave="onLeave",n.onClosing="onClosing"}(o||(o={})),function(n){n.onEnter="onEnter",n.onLeave="onLeave"}(i||(i={}));var f=[],v=!1,d=!0;function p(n){setTimeout((function(){window.history.pushState({id:n.id,name:n.id},n.id)}),100),f.push(n)}function h(n){f.remove((function(e){return e.id===n}))}function y(n){var e;d&&(n.state,f.length>0&&(e=f.pop())&&e.back())}function m(n){"Escape"===n.key&&window.history.back()}v||(window.onpopstate=y,document.addEventListener("popstate",y),document.addEventListener("keydown",m,!1),v=!0);var w={},x=[],b={};function g(n,e,t,r,o,i,u){w[n]?console.warn("ViewModule","Duplicate container type"):w[n]={views:[],containerOrder:e,config:t,openView:r,closeView:o,activateView:i,changeContainer:u}}function C(n){w[n]&&delete w[n]}function E(n){var e,t,r,o,u;return c(this,void 0,void 0,(function(){var a,c,s,f,v;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),n.id||(n.id=n.type+"-"+Date.now()),(a=w[n.type])?V(n.type,n.id)||(c=a.views.find((function(e){return e.id===n.id})))&&!(null===(e=a.config)||void 0===e?void 0:e.moveBetweenViews)?[2]:(s=L(),(f=(null==s?void 0:s.type)===n.type)&&(null==s?void 0:s.id)===n.id?[2]:(s&&!f&&(v=w[s.type],null===(t=v.changeContainer)||void 0===t||t.call(v,n,i.onLeave)),(null===(r=a.config)||void 0===r?void 0:r.disableBrowserHistory)||p({id:n.id,back:function(){T(n.id,n.type)}}),j(n.type,n.id,!0),c?[4,null===(o=a.activateView)||void 0===o?void 0:o.call(a,c)]:[3,2])):[2];case 1:return l.sent(),function(n){var e=x.remove((function(e){return e.id===n.id}));e&&x.push(e)}(c),[3,4];case 2:return a.views.push(n),[4,a.openView(n)];case 3:l.sent(),null===(u=n.onOpened)||void 0===u||u.call(n),function(n){x.push(n)}(n),l.label=4;case 4:return j(n.type,n.id,!1),[3,6];case 5:return l.sent(),j(n.type,n.id,!1),[3,6];case 6:return[2]}}))}))}function T(n,e,t,r){var o,u,a,s;return void 0===t&&(t="Current"),c(this,void 0,void 0,(function(){var c,f,v,d,p,y,m,b;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n&&e?(c=w[e])?V(e,n)||(f=c.views.findIndex((function(e){return e.id===n})))<0||x.length<2?[2]:(v=c.views[f],d=L([v.id]),p=A(c.views.map((function(n){return n.id})),t,f),y=L(p,v.type),m=(null==d?void 0:d.type)===v.type,d&&!m&&(b=w[d.type],null===(o=b.changeContainer)||void 0===o||o.call(b,v,i.onEnter)),(null===(u=c.config)||void 0===u?void 0:u.disableBrowserHistory)||h(n),j(e,n,!0),null===(a=v.onClose)||void 0===a||a.call(v,r),[4,c.closeView(v,y,t)]):[2]:[2];case 1:return l.sent(),null===(s=v.onClosed)||void 0===s||s.call(v,r),k(c.views,t,f),function(n,e){switch(e){case"All":x.removeAll((function(e){return e.type===n.type}));break;case"AllExceptFirst":case"AllExceptLast":break;case"Current":x.remove((function(e){return e.id===n.id}))}}(v,t),j(e,n,!1),[3,3];case 2:return l.sent(),j(e,n,!1),[3,3];case 3:return[2]}}))}))}function k(n,e,t){var r=n.length;switch(e){case"All":return n.splice(0,r);case"AllExceptFirst":return n.splice(1,r-1);case"AllExceptLast":return n.splice(0,r-1);case"Current":return n.splice(t,1)}}function A(n,e,t){var r=n.length;switch(e){case"All":return n.slice(0,r);case"AllExceptFirst":return n.slice(1,r);case"AllExceptLast":return n.slice(0,r-1);case"Current":return n[t]}}function L(n,e){for(var t=x.length-1;t>=0;t--){var r=x[t];if((n||[]).indexOf(r.id)<0&&(void 0===e||r.type===e))return r}}function V(n,e){return(b[n]||[]).findIndex((function(n){return n===e}))>-1}function j(n,e,t){var r=b[n];r||(r=b[n]=[]),t?r.safePush(e):r.remove((function(n){return n===e}))}var R,D=function(n){e.useEffect(n,[])},I=function(){D((function(){var n=function(n){n.preventDefault()};return window.addEventListener("selectstart",n),function(){window.removeEventListener("selectstart",n)}}))},S=function(n){return e.useCallback(n,[])};exports.EventType=void 0,(R=exports.EventType||(exports.EventType={})).None="None",R.Tap="Tap",R.RightClick="RightClick",R.DoubleClick="DoubleClick",R.Hover="Hover",R.Press="Press",R.HorizontalSwipe="HorizontalSwipe",R.VerticalSwipe="VerticalSwipe";var B=function(n,t,r){var o=e.useRef(),i=e.useRef(),u=e.useRef([]),c=e.useRef(!1),l=e.useRef(),s=e.useRef();I();var f=function(){return Date.now()},v=function(n){if(n.touches){var e=i.current,t=n.touches[n.touches.length-1],r=n.clientX||t.clientX,o=n.clientY||t.clientY;return{x:r,y:o,moveX:r-((null==e?void 0:e.x)||0),moveY:o-((null==e?void 0:e.y)||0),e:n}}},d=function(n){var e,t=u.current;f()-t[t.length-1]>300||c.current?h():t.length<2||(h(),2===t.length&&t[1]-t[0]<300&&(null===(e=null==r?void 0:r.onDoubleClick)||void 0===e||e.call(r,n)))},p=function(n){var e;n.preventDefault(),null===(e=r.onRightClick)||void 0===e||e.call(r,n)},h=function(){u.current=[]},y=S((function(n){var e=u.current;e.length>2&&(u.current.length=0),e.push(f()),i.current=s.current=v(n),T(!0),x(n)})),m=S((function(n){var e;b(n),T(!1),w(),l.current&&(null===(e=r.onTouchEnd)||void 0===e||e.call(r,s.current),l.current=void 0)})),w=function(){var n=o.current;n&&(clearTimeout(n),o.current=void 0)},x=function(n){if(t===exports.EventType.Press)!function(n){w(),h(),o.current=setTimeout((function(){var e;c.current||null===(e=r.onPress)||void 0===e||e.call(r,n)}),500)}(n)},b=function(n){switch(t){case exports.EventType.DoubleClick:d(n);break;case exports.EventType.Tap:!function(n){var e,t=u.current;1!==t.length||c.current?h():(h(),f()-t[0]>300||(u.current=[],null===(e=null==r?void 0:r.onTap)||void 0===e||e.call(r,n)))}(n);break;default:h()}},g=S((function(n){switch(c.current=!0,t){case exports.EventType.HorizontalSwipe:case exports.EventType.VerticalSwipe:!function(n){var e,u=v(n);if(s.current=u,o.current)l.current&&(null===(e=r.onTouchMove)||void 0===e||e.call(r,u));else{h();var f=t===exports.EventType.VerticalSwipe;o.current=setTimeout((function(){var n,e,t,o;if(c.current){var s=i.current;if(u&&s){var v=Math.abs(u.moveX),d=Math.abs(u.moveY);v<d&&f?(l.current=!0,null===(n=r.onTouchStart)||void 0===n||n.call(r,a(a({},u),{x:s.x,y:s.y})),null===(e=r.onTouchMove)||void 0===e||e.call(r,u)):v>=d&&!f&&(l.current=!0,null===(t=r.onTouchStart)||void 0===t||t.call(r,a(a({},u),{x:s.x,y:s.y})),null===(o=r.onTouchMove)||void 0===o||o.call(r,u))}}}),10)}}(n)}})),C=S((function(n){var e;null===(e=null==r?void 0:r.onMouseover)||void 0===e||e.call(r,n)})),E=S((function(n){var e;null===(e=null==r?void 0:r.onMouseout)||void 0===e||e.call(r,n)})),T=function(n){n&&!c.current?(A("mousemove",g),A("touchmove",g)):n||(c.current=!1,k("mousemove",g),k("touchmove",g))},k=function(e,t,r){n.current&&(r?n.current:window).removeEventListener(e,t)},A=function(e,t,r){n.current&&(r?n.current:window).addEventListener(e,t)},L=function(){if(n.current&&t!==exports.EventType.None){if(t===exports.EventType.Hover)return A("mouseover",C,!0),A("mouseout",E,!0),function(){k("mouseover",C,!0),k("mouseout",E,!0)};if(t===exports.EventType.RightClick)return A("contextmenu",p,!0),function(){k("contextmenu",d,!0)};A("mousedown",y,!0),A("mouseup",m),A("touchstart",y,!0),A("touchend",m)}};return D((function(){return L(),function(){T(!1),k("mousedown",y,!0),k("mouseup",m),k("touchstart",y,!0),k("touchend",m),w()}})),{updateRef:function(){L()}}},M=function(n){var e={current:null};B(e,n.event,{onPress:function(n){return t(n)},onTap:function(n){return t(n)},onDoubleClick:function(n){return t(n)},onRightClick:function(n){return t(n)},onMouseover:function(n){t(n)}});var t=function(t){var r;E({type:"Overlay",component:n.component,data:n.mapDataTo?n.mapDataTo(n.data):n.data,onClose:function(e){var t;null===(t=n.onClose)||void 0===t||t.call(n,e)},options:{disableBackdrop:(n.backdrop,!0),params:{event:t,target:(null===(r=n.getTargetElement)||void 0===r?void 0:r.call(n))||e.current||t.target,position:n.position?n.position:"BottomRight"}}})};return e};var _=e.createContext({});e.memo((function(t){var r=t.children,i=t.viewInfo,u=e.useRef({}),c=function(n,e){if(e){var t=u.current[n];t||(t=u.current[n]=[]),t.push(e)}},l=function(n,e){e&&u.current[n].remove((function(n){return n===e}))},s=function(n,e){var t=u.current[n];null==t||t.forEach((function(n){n(e)}))};return D((function(){i.events={onEnter:function(n){s(o.onEnter,n)},onLeave:function(n){s(o.onLeave,n)},onClosing:function(n){s(o.onClosing,n)}}})),n.jsx(_.Provider,a({value:{listenEvents:function(n){return c(o.onEnter,n.onEnter),c(o.onLeave,n.onLeave),c(o.onClosing,n.onClosing),function(){l(o.onEnter,n.onEnter),l(o.onLeave,n.onLeave),l(o.onClosing,n.onClosing)}},emitEvent:s,close:function(n,e){var t=i.view;T(t.id,t.type,n,e)},getViewData:function(){return i.view.data},openView:function(n){n.type=i.view.type,E(n)}}},{children:r}))}),(function(){return!0}));var O=function(n){var t=e.useContext(_);D((function(){if(n){var e=t.listenEvents(n);return function(){e()}}}));var r=function(n,e){var r;null===(r=t.close)||void 0===r||r.call(t,n,e)};return{close:function(n){r("Current",n)},closeByType:r,openView:function(n){var e;null===(e=t.openView)||void 0===e||e.call(t,n)},viewData:t.getViewData()}};function P(){var e=O({}).viewData;return n.jsx("div",{children:n.jsx("span",{children:e.message})})}function F(){var e=O({}),t=e.close,r=e.viewData;return n.jsxs(n.Fragment,{children:[n.jsx("div",a({className:"confirm-card"},{children:null==r?void 0:r.message})),n.jsxs("div",a({className:"d-flex mt-3"},{children:[n.jsx("div",a({style:{paddingRight:".5rem",width:"50%"}},{children:n.jsx("button",a({className:"btn btn-warning w-100",onClick:function(){return t({res:!1})}},{children:"خیر"}))})),n.jsx("div",a({style:{paddingLeft:".5rem",width:"50%"}},{children:n.jsx("button",a({className:"btn btn-primary w-100",onClick:function(){return t({res:!0})}},{children:"بله"}))}))]}))]})}const N=e.createContext(null),z={didCatch:!1,error:null};class H extends e.Component{constructor(n){super(n),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=z}static getDerivedStateFromError(n){return{didCatch:!0,error:n}}resetErrorBoundary(){const{error:n}=this.state;if(null!==n){for(var e,t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];null===(e=(t=this.props).onReset)||void 0===e||e.call(t,{args:o,reason:"imperative-api"}),this.setState(z)}}componentDidCatch(n,e){var t,r;null===(t=(r=this.props).onError)||void 0===t||t.call(r,n,e)}componentDidUpdate(n,e){const{didCatch:t}=this.state,{resetKeys:r}=this.props;var o,i;t&&null!==e.error&&function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.length!==e.length||n.some(((n,t)=>!Object.is(n,e[t])))}(n.resetKeys,r)&&(null===(o=(i=this.props).onReset)||void 0===o||o.call(i,{next:r,prev:n.resetKeys,reason:"keys"}),this.setState(z))}render(){const{children:n,fallbackRender:t,FallbackComponent:r,fallback:o}=this.props,{didCatch:i,error:u}=this.state;let a=n;if(i){const n={error:u,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)a=t(n);else if(r)a=e.createElement(r,n);else{if(null!==o&&!e.isValidElement(o))throw u;a=o}}return e.createElement(N.Provider,{value:{didCatch:i,error:u,resetErrorBoundary:this.resetErrorBoundary}},a)}}var q,X,U,Y=function(){return n.jsx(n.Fragment,{})};function K(){var t=this,r=e.useState(),o=r[0],i=r[1],u=e.useRef(!1),s=O({}),f=s.viewData,v=s.close;return D((function(){return c(t,void 0,void 0,(function(){var n;return l(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,f.callback()];case 1:return(n=e.sent()).type===U.Close?v():i(n),[3,3];case 2:return e.sent(),v(),[3,3];case 3:return[2]}}))})),f.onClickedBackdrop=function(){u.current&&v()},function(){}})),e.useEffect((function(){u.current=!!o}),[o]),n.jsx("div",{children:o?n.jsxs(n.Fragment,{children:[n.jsx("span",{children:o.message}),o.type===U.Confirm&&n.jsx("button",a({className:"btn btn-primary w-100",onClick:function(){return v({res:!0})}},{children:o.confirmButtonCaption}))]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:f.message}),n.jsx("span",{children:"loading..."})]})})}function W(){var e=O(),t=e.close,r=e.viewData;return n.jsx("div",a({style:{backgroundColor:"yellow",marginTop:"20px",borderRadius:"8px",padding:"5px"}},{children:n.jsx("ul",{children:r.options.map((function(e){return n.jsx("li",a({onClick:function(){return t({res:e})}},{children:e.label}),e.value)}))})}))}function Q(){var t=e.useRef(),r=O({}),o=r.close,i=r.viewData;return D((function(){return i.delay&&(t.current=setTimeout((function(){o()}),1e3*i.delay)),function(){t.current&&clearTimeout(t.current)}})),n.jsx("div",a({className:"w-100"},{children:n.jsxs("div",a({className:"row"},{children:[n.jsx("h1",a({className:"col-8"},{children:i.message})),n.jsx("button",a({className:"col-3 btn btn-success",onClick:function(){return o({res:!0})}},{children:"delete"}))]}))}))}!function(n){n.MasterTab="MasterTab",n.Tab="Tab",n.Modal="Modal",n.BottomSheet="BottomSheet",n.Toast="Toast"}(q||(q={})),function(n){n.Success="Success",n.Error="Error"}(X||(X={})),function(n){n.Close="Close",n.Confirm="Confirm"}(U||(U={}));var G=window,$=G.$requestAnimationFrame=G.requestAnimationFrame||G.webkitRequestAnimationFrame||G.mozRequestAnimationFrame||function(n){G.setTimeout(n,1e3/60)};function J(n,e,t,r){var o=Date.now();if(n<0)throw new Error("ANIMATION_SPEED_INVALID");n=n||300;var i=!1,u=function(){if(i)null==r||r();else{var a=Math.min(1,(Date.now()-o)/n);e(Math.floor(1e3*a)/1e3),a<1?$(u):t()}};return u(),function(){i=!0}}var Z=function(){var n=e.useRef([]),t=S((function(e){n.current.remove((function(n){return n===e}))})),r=S((function(e,r,o,i){var u=J(e,(function(n){r(n)}),(function(){t(u),o()}),(function(){t(u),null==i||i()}));return n.current.push(u),u})),o=S((function(n){t(n),n()}));return D((function(){return function(){n.current.forEach((function(n){n()})),n.current=[]}})),{requestAnimate:r,cancelAnimate:o}},nn=4,en=1e-7,tn=10,rn=.1,on="function"==typeof Float32Array;function un(n,e){return 1-3*e+3*n}function an(n,e){return 3*e-6*n}function cn(n){return 3*n}function ln(n,e,t){return((un(e,t)*n+an(e,t))*n+cn(e))*n}function sn(n,e,t){return 3*un(e,t)*n*n+2*an(e,t)*n+cn(e)}function fn(n){return n}function vn(n,e,t,r){if(!(0<=n&&n<=1&&0<=t&&t<=1))throw new Error("bezier x values must be in [0, 1] range");if(n===e&&t===r)return fn;for(var o=on?new Float32Array(11):new Array(11),i=0;i<11;++i)o[i]=ln(i*rn,n,t);function u(e){for(var r=0,i=1;10!==i&&o[i]<=e;++i)r+=rn;--i;var u=r+(e-o[i])/(o[i+1]-o[i])*rn,a=sn(u,n,t);return a>=.001?function(n,e,t,r){for(var o=0;o<nn;++o){var i=sn(e,t,r);if(0===i)return e;e-=(ln(e,t,r)-n)/i}return e}(e,u,n,t):0===a?u:function(n,e,t,r,o){var i,u,a=0;do{(i=ln(u=e+(t-e)/2,r,o)-n)>0?t=u:e=u}while(Math.abs(i)>en&&++a<tn);return u}(e,r,r+rn,n,t)}return function(n){return 0===n||1===n?n:ln(u(n),e,r)}}var dn=vn(.25,1,.5,1),pn={duration:400,start:function(n,e){var t=n.ref.style,r=null==e?void 0:e.ref.style;t.display="1",r&&(r.display="block",r.opacity="1")},animate:function(n,e,t){var r=e.ref.style,o=null==t?void 0:t.ref.style,i=dn(n);r.transform="translateX(".concat(100*i,"%)"),o&&(o.filter="brightness(".concat(20*n+80,"%)"),o.transform="translateX(".concat(.2*(i-1)*100,"%)"))},end:function(n,e){var t=n.ref.style,r=null==e?void 0:e.ref.style;t.opacity="0",t.display="none",r&&(r.opacity="1")}},hn={duration:400,start:function(n,e){var t,r=n.ref.style,o=null===(t=null==e?void 0:e.ref)||void 0===t?void 0:t.style;r.display="block",r.zIndex="2",r.transform="translateX(100%)",o&&(o.zIndex="1")},animate:function(n,e,t){var r,o=dn(n),i=e.ref.style,u=null===(r=null==t?void 0:t.ref)||void 0===r?void 0:r.style;i.transform="translateX(".concat(100*(1-o),"%)"),u&&(u.transform="translateX(".concat(100*-o*.2,"%)"),u.filter="brightness(".concat(20*(1-n)+80,"%)"))},end:function(n,e){var t,r=null===(t=null==e?void 0:e.ref)||void 0===t?void 0:t.style;r&&(r.display="none")}},yn={duration:300,start:function(n,e){n.ref.style.zIndex="0"},animate:function(n,e,t){var r=dn(n),o=e.ref.style;o.opacity=1-n+"";var i=e.ref.offsetHeight;o.marginTop="".concat(-i*r,"px")},end:function(n,e){}},mn=e.createContext({}),wn=e.memo((function(t){var r=t.children,i=t.viewInfo,u=e.useRef({}),c=function(n,e){if(e){var t=u.current[n];t||(t=u.current[n]=[]),t.push(e)}},l=function(n,e){e&&u.current[n].remove((function(n){return n===e}))},s=function(n,e){var t=u.current[n];null==t||t.forEach((function(n){n(e)}))};return e.useEffect((function(){i.events={onEnter:function(n){s(o.onEnter,n)},onLeave:function(n){s(o.onLeave,n)},onClosing:function(n){s(o.onClosing,n)}}}),[]),n.jsx(mn.Provider,a({value:{listenEvents:function(n){return c(o.onEnter,n.onEnter),c(o.onLeave,n.onLeave),c(o.onClosing,n.onClosing),function(){l(o.onEnter,n.onEnter),l(o.onLeave,n.onLeave),l(o.onClosing,n.onClosing)}},emitEvent:s,close:function(n,e){var t=i.view;T(t.id,t.type,n,e)},getViewData:function(){return i.view.data},openView:function(n){n.type=i.view.type,E(n)}}},{children:r}))}),(function(){return!0})),xn=function(){function n(){var n=this;this.observables={},this.defaultId="subscribers",this.getForceId=function(e){var t;return(null===(t=n.getId)||void 0===t?void 0:t.call(n,e||{}))||n.defaultId}}return n.prototype.on=function(n,e){var t=this.getForceId(e),r=this.observables[t];r||(r=this.observables[t]=[]),r.push(n)},n.prototype.off=function(n,e){var t=this.getForceId(e),r=this.observables[t];null==r||r.remove((function(e){return e===n})),0===r.length&&delete this.observables[t]},n.prototype.emit=function(n,e){var t=this.getForceId(e),r=this.observables[t];null==r||r.forEach((function(t){null==t||t.apply(t,[n,e])}))},n}(),bn=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return r(e,n),e.prototype.update=function(n){this.emit("Update",n)},e.prototype.delete=function(n){var e;this.emit("Delete",n);var t=null===(e=this.getId)||void 0===e?void 0:e.call(this,n);t&&delete this.observables[t]},e}(xn),gn=new(function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return r(e,n),e.prototype.getId=function(n){return n.id},e}(xn)),Cn=[{id:"1",name:"ali"},{id:"2",name:"reza"}];var En=function(n){return function(n){return Promise.resolve({})}},Tn=En(),kn=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return r(e,n),e.prototype.getId=function(n){return n.id},e}(bn),An=[{id:"1",text:"hello"},{id:"2",text:"world"}];var Ln=new kn;function Vn(n,e){return c(this,void 0,void 0,(function(){return l(this,(function(t){return[2,new Promise((function(t,r){E({type:q.Modal,id:"confirm-"+Date.now(),component:n,data:e,onClose:function(n){n?t(n):r(!1)}})}))]}))}))}function jn(n,e){return!!n&&(n===e||e.contains(n))}Event.prototype.contains=function(n){return jn(this.target,n)},Array.prototype.last=function(){var n=this||[];return n[n.length-1]},Array.prototype.safePush=function(n){var e=this||[];e.find((function(e){return e===n}))||e.push(n)},Array.prototype.remove=function(n){var e=this||[],t=e.findIndex((function(e){return n(e)}));if(t>=0){var r=e[t];return e.splice(t,1),r}},Array.prototype.removeAll=function(n){for(var e=!0,t=this||[];e;)if(!t.remove(n)){e=!1;break}return[]},exports.Alert=P,exports.Confirm=F,exports.ContextMenuWrapper=function(t){var r=t.children,o=t.contextMenuConfig,i=t.data,u=t.onSelect,c=e.useRef(null);D((function(){var n;l.current=null===(n=c.current)||void 0===n?void 0:n.children[0]}));var l=M({component:o.component,backdrop:o.backdrop,className:o.className,onClose:function(n){null==u||u(n),o.onClose(n)},position:o.position,positionType:o.positionType,event:o.event,data:i,mapDataTo:o.mapDataTo});return n.jsx("span",a({ref:c},{children:r}))},exports.ErrorBoundaryWrapper=function(e){var t=e.customFallback,r=void 0===t?Y:t,o=e.children;return n.jsx(H,a({FallbackComponent:r},{children:o}))},exports.LoadingDialog=K,exports.ObjectObservable=bn,exports.Observable=xn,exports.Overlay=function(){var e=O({}),t=e.close,r=e.viewData;return n.jsx("ul",a({className:"d-block bg-primary p-2 text-lite"},{children:r.options.map((function(e){return n.jsx("li",a({onClick:function(){t({res:e.value})}},{children:e.text}),e.text)}))}))},exports.Scrollable=function(t){var r=t.children,o=t.viewInfo,i=e.useRef(),u=B(i,exports.EventType.VerticalSwipe,{onTouchMove:function(){console.log("Move horizontal")},onTouchStart:function(){console.log("Start move horizontal")},onTouchEnd:function(){console.log("End move horizontal")}}).updateRef;return D((function(){i.current=o.elRef,u()})),n.jsx(n.Fragment,{children:r})},exports.Toast=Q,exports.ViewComponent=function(t){var r=t.viewInfo,o=e.useRef(null),i=r.view.className;return D((function(){var n;r.elRef=o.current,null===(n=r.onInit)||void 0===n||n.call(r,o.current)})),n.jsx("div",a({ref:o,className:"view-wrapper"+(i?" ".concat(i):"")},{children:r.view.component()}))},exports.ViewContext=mn,exports.ViewContextProvider=wn,exports.activateTabConfig={duration:200,start:function(n,e){var t=n.ref.style;t.display="block",t.opacity="0"},animate:function(n,e,t){var r=e.ref.style,o=null==t?void 0:t.ref.style;r.opacity="".concat(n),o&&(o.opacity="".concat(1-n))},end:function(n,e){var t=null==e?void 0:e.ref.style;t&&(t.display="none")}},exports.activePartialTabAnimationConfig={duration:300,start:function(n,e){var t=n.ref.style;t.display="block",t.opacity="0"},animate:function(n,e,t){var r=e.ref.style,o=null==t?void 0:t.ref.style;r.opacity="".concat(n),o&&(o.opacity="".concat(1-n/2))}},exports.addEventListenerEl=function(n,e,t){null==n||n.addEventListener(e,t)},exports.apiPost=En,exports.bezier=vn,exports.chatObservable=gn,exports.chatUpdate=function(){var n=Cn[1];n.name="Hasan",gn.emit("Update",n)},exports.closeTabAnimationConfig=pn,exports.closeView=T,exports.containsTargetEl=jn,exports.disableBrowserAction=function(){d=!1,setTimeout((function(){d=!0}),1e3)},exports.getChats=function(){return Cn},exports.getChatsApi=Tn,exports.getMessages=function(){return An},exports.getQueryParam=function(n){return u||(u=function(){var n=window.location.href,e=n.indexOf("?"),t="";e>0&&(t=n.substring(e+1));return t.split("&").reduce((function(n,e){var t=e.split("=");return n[t[0]]=t[1],n}),{})}()),u[n]},exports.getViewsByCloseType=A,exports.leaveContainerMasterTabAnimationConfig={duration:300,start:function(n,e){var t=n.ref.style;t.display="block",t.opacity="0"},animate:function(n,e,t){var r=e.ref.style,o=null==t?void 0:t.ref.style;r.opacity="".concat(n),o&&(o.opacity="".concat(1-n/2))}},exports.listenBack=p,exports.messageUpdate=function(){var n=An[1];n.text="by",Ln.update(n)},exports.msgObservable=Ln,exports.onCloseToastConfig=yn,exports.onEnterContainerConfig={duration:300,animate:function(n,e){e.ref.style.opacity="".concat(.5+.5*n)}},exports.onEnterTabContainerConfig={duration:400,start:function(n,e){},animate:function(n,e,t){},end:function(n,e){}},exports.onLeaveContainerConfig={duration:500,start:function(n,e){},animate:function(n,e,t){},end:function(n,e){}},exports.onOpenToastConfig={duration:300,start:function(n,e){var t=n.ref.style;t.position="relative",t.zIndex="1",t.opacity="0"},animate:function(n,e,t){e.ref.style.opacity=n+""}},exports.openAlert=function(n){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,new Promise((function(e){E({type:q.Tab,id:"alert-"+Date.now(),component:P,data:n,onClose:function(){e(!0)}})}))]}))}))},exports.openConfirm=function(n){return c(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Vn(F,n)];case 1:if(!e.sent())throw Error("CANCEL");return[2,!0];case 2:throw e.sent();case 3:return[2]}}))}))},exports.openCustomConfirm=Vn,exports.openLoading=function(n,e){var t=n;E({type:e||q.Modal,id:"loading-"+Date.now(),data:t,component:K,className:"loading-message",options:{disableBackdrop:!0,onClickedBackdrop:function(){var n;null===(n=t.onClickedBackdrop)||void 0===n||n.call(t)}}})},exports.openPartialTabAnimationConfig={duration:300,start:function(n,e){var t=n.ref.style;t.display="block",t.opacity="0"},animate:function(n,e,t){var r=e.ref.style,o=null==t?void 0:t.ref.style;r.opacity="".concat(n),o&&(o.opacity="".concat(1-n/2))}},exports.openTabAnimationConfig={duration:300,start:function(n,e){var t=n.ref.style;t.display="block",t.opacity="0"},animate:function(n,e,t){var r=e.ref.style,o=null==t?void 0:t.ref.style;o&&(o.opacity="".concat(1-n)),r.opacity="".concat(n)},end:function(n,e){var t=null==e?void 0:e.ref.style;t&&(t.display="none")}},exports.openTabContainerConfig=hn,exports.openToast=function(n){E({type:q.Toast,id:"toast-"+Date.now(),data:n,component:Q,className:"toast-message"})},exports.openView=E,exports.registerContainer=g,exports.removeContainer=C,exports.removeEventListenerEl=function(n,e,t){null==n||n.removeEventListener(e,t)},exports.replaceUrlWithoutQueryParam=function(n){var e=function(n,e){var t=e.split("?")[0],r=[],o=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==o){for(var i=(r=o.split("&")).length-1;i>=0;i-=1)r[i].split("=")[0]===n&&r.splice(i,1);r.length&&(t="/?"+r.join("&"))}return t}(n,window.location.href);window.history.replaceState({},document.title,e)},exports.requestAnimation=J,exports.unlistenBack=h,exports.updateViewsByCloseType=k,exports.useAnimate=Z,exports.useClickAsync=function(n,t,r){var o=e.useRef(!1),i={current:void 0};return D((function(){var e=i.current;e&&e.addEventListener("click",(function(i){return c(void 0,void 0,void 0,(function(){var i,u;return l(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),o.current?[2]:(e.classList.add("loading"),o.current=!0,[4,n()]);case 1:return i=a.sent(),o.current=!1,e.classList.remove("loading"),null==t||t(i),[3,3];case 2:return u=a.sent(),e.classList.remove("loading"),o.current=!1,null==r||r(u),[3,3];case 3:return[2]}}))}))}))})),i},exports.useContextEvents=function(n){var t=e.useRef({}),r=n;r.__listeners||(r.__listeners={},r.__events={});var o=function(n){var e=r.__listeners;r.__events[n]=function(t){(e[n]||[]).forEach((function(n){null==n||n(t)}))}};return D((function(){return function(){var n=r.__listeners,e=t.current,o=function(t){e[t].forEach((function(e){var r=n[t].findIndex((function(n){return n===e}));n[t].splice(r,1)}))};for(var i in e)o(i)}})),{listen:function(n){if(n){var e=r.__listeners;for(var i in n){e[i]||(o(i),e[i]=[]),e[i].push(n[i]);var u=t.current[i];u||(u=t.current[i]=[]),u.push(n[i])}}},call:r.__events}},exports.useDisableSelection=I,exports.useEvent=B,exports.useObserver=function(n,t,r,o){var i=e.useState(t),u=i[0],c=i[1],l=S((function(n,e){switch(n){case"Update":c(e===t?a({},e):e),null==o||o(e);break;case"Delete":null==r||r(e)}}));return D((function(){return n.on(l,t),function(){n.off(l,t)}})),u},exports.useOverlay=M,exports.useOverlayMenu=function(n){return M({event:n.event,component:W,data:n.data,backdrop:n.backdrop,position:n.position,onClose:n.onClose,getTargetElement:n.getTargetElement,mapDataTo:n.mapDataTo})},exports.useView=O,exports.useViewManage=function(n,t,r,o,u,a,f,v){var d=e.useState([]),p=d[0],h=d[1],y=e.useRef(""),m=e.useRef(!1),w=Z().requestAnimate,x=S((function(n,e,t,r){return new Promise((function(o,i){var u,a,c;if(t||o(!0),null===(u=null==t?void 0:t.start)||void 0===u||u.call(t,n,e,r),(null==r?void 0:r.disableAnimate)||!(null==t?void 0:t.duration))return null===(a=null==t?void 0:t.animate)||void 0===a||a.call(t,1,n,e,r),null===(c=null==t?void 0:t.end)||void 0===c||c.call(t,n,e,r),void o(!0);document.body.classList.add("animating"),w(t.duration,(function(o){var i;null===(i=null==t?void 0:t.animate)||void 0===i||i.call(t,o,n,e,r)}),(function(){var i;null===(i=null==t?void 0:t.end)||void 0===i||i.call(t,n,e,r),document.body.classList.remove("animating"),o(!0)}))}))})),b=S((function(n){return new Promise((function(e,t){var i={id:n.id,view:n,onInit:function(t){return c(void 0,void 0,void 0,(function(){var u,a,c,s,f,v,d;return l(this,(function(l){switch(l.label){case 0:return u=p.find((function(n){return n.id===y.current})),y.current=n.id,a=n.options,(c=null==a?void 0:a.disableAnimate)||m.current||(m.current=!0,c=(null==r?void 0:r.disableFirstTimeAnimate)||!1),(null==a?void 0:a.inBackground)?(t.style.display="none",e(!0),[2]):[4,x({view:n,ref:i.elRef},u?{view:null==u?void 0:u.view,ref:null==u?void 0:u.elRef}:void 0,o,{disableAnimate:c})];case 1:return l.sent(),u&&(null===(f=null===(s=u.events)||void 0===s?void 0:s.onLeave)||void 0===f||f.call(s,{toView:n})),null===(d=null===(v=i.events)||void 0===v?void 0:v.onEnter)||void 0===d||d.call(v,{fromView:null==u?void 0:u.view,data:n.data}),e(!0),[2]}}))}))}};p.push(i),h(s([],p,!0))}))})),E=S((function(n,e,t){return c(void 0,void 0,void 0,(function(){var o,i,a,c,f,v,d,m;return l(this,(function(l){switch(l.label){case 0:return y.current="",e&&(y.current=e.id,o=p.find((function(n){return n.id===e.id}))),(i=p.findIndex((function(e){return e.id===n.id})))<0?[2]:(a=p[i],c=!(null==r?void 0:r.moveBetweenViews)&&i<p.length-1,null===(v=null===(f=a.events)||void 0===f?void 0:f.onClosing)||void 0===v||v.call(f,{toView:e}),[4,x({view:p[i].view,ref:p[i].elRef},o?{view:o.view,ref:o.elRef}:void 0,u,{disableAnimate:c,closeType:t})]);case 1:return l.sent(),o&&(null===(m=null===(d=o.events)||void 0===d?void 0:d.onEnter)||void 0===m||m.call(d,{fromView:a.view})),i>-1&&(k(p,t,i),h(s([],p,!0))),[2]}}))}))})),T=S((function(n){return c(void 0,void 0,void 0,(function(){var e,t,r,o,i,u;return l(this,(function(c){switch(c.label){case 0:return(e=p.find((function(e){return e.id===n.id})))?y.current===n.id?[2]:(t=p.find((function(n){return n.id===y.current})),y.current=n.id,[4,x({view:e.view,ref:e.elRef},t?{view:t.view,ref:t.elRef}:void 0,a)]):[2];case 1:return c.sent(),t&&(null===(o=null===(r=t.events)||void 0===r?void 0:r.onLeave)||void 0===o||o.call(r,{toView:n})),null===(u=null===(i=e.events)||void 0===i?void 0:i.onEnter)||void 0===u||u.call(i,{fromView:null==t?void 0:t.view}),[2]}}))}))})),A=S((function(n,e){return c(void 0,void 0,void 0,(function(){var t,r,o,u,a;return l(this,(function(c){switch(c.label){case 0:return(t=p.find((function(n){return n.id===y.current})))?[4,x({view:t.view,ref:t.elRef},{view:n,ref:null},e===i.onEnter?f:v)]:[2];case 1:return c.sent(),e===i.onEnter?null===(o=null===(r=t.events)||void 0===r?void 0:r.onEnter)||void 0===o||o.call(r,{fromView:n}):e===i.onLeave&&(null===(a=null===(u=t.events)||void 0===u?void 0:u.onLeave)||void 0===a||a.call(u,{toView:n})),[2]}}))}))}));return D((function(){return g(n,t,r||{},b,E,T,A),function(){C(n)}})),{activeViewId:y.current,viewsInfo:p,openView:b,closeView:E}};
